# My First Bundle

This is an empty bundle that porter has created to get you started!

# Contents

## porter.yaml

This is the porter manifest. See https://porter.sh/author-bundles/ for 
details on every field and how to configure your bundle. This is a required
file.

## helpers.sh

This is a bash script where you can place helper functions that you can call
from your porter.yaml file.

## Prepare your machine

Your PC should have at least 16GB RAM (recommended 32 GB RAM).
Virtualization should be enabled in BIOS.

## Prepare your accesses - enable internet access on WSL

In some companies, Internet Access on WSL can be blocked. If you have such problems, please get in touch with your InfoSec consultant so your machine can be added to the security policy that allows accessing the internet. 

## Install Docker

Get latest Docker installation from this page

https://docs.docker.com/desktop/windows/install/

## Install Ubuntu 22.04 LTS

Get latest WSL2 - Ubuntu 22.04 from Microsoft Store.
More information here: https://docs.microsoft.com/en-us/windows/wsl/install

After instalation please run below command in command line:

```bash
wsl -l -v
```
You should be able to see below screen:
![MicrosoftTeams-image](https://user-images.githubusercontent.com/87713372/170029242-23d39155-0c70-4776-a0a6-c22572f5fdf5.png)

The version of the Ubuntu-20.04 or Ubuntu 22.04 must be 2.
The  default instance of WSL should be Ubuntu 20.04 or 22.04 (not docker-desktop-....)

## Fixing problems with CERTIFICATES under WSL2
```bash
sudo openssl s_client -showcerts -connect porter.sh </dev/null 2>/dev/null|openssl x509 -outform PEM > proxygg22.crt

sudo cp proxygg.crt /usr/local/share/ca-certificates/

sudo update-ca-certificates
```

## Installing mixins
```bash
porter mixins install pac --url https://github.com/squillace/porter-pac/releases/download --version v0.1.3

porter mixins install yq --url https://github.com/squillace/porter-yq/releases/download --version v0.1.0

porter mixins install jq --url https://github.com/squillace/porter-jq/releases/download --version v0.1.0
```

## Publishing bundles to Github Container Registry

1. Generate token on Github account - Settings - Developer Settings - Personal access tokens

https://github.com/settings/tokens

2. Implement token in WSL

 ```bash
export CR_PAT=<put here your token which you can get from previous step>

echo $CR_PAT | docker login ghcr.io -u <Github user name (not email address)> --password-stdin

export no_proxy=ghcr.io

porter publish --insecure-registry

 ```

## README.md

This explains the files created by `porter create`. It is not used by porter and
can be deleted.

## Dockerfile.tmpl

This is a template Dockerfile for the bundle's invocation image. You can
customize it to use different base images, install tools and copy configuration
files. Porter will use it as a template and append lines to it for the mixin and to set
the CMD appropriately for the CNAB specification. You can delete this file if you don't
need it.

Add the following line to **porter.yaml** to enable the Dockerfile template:

```yaml
dockerfile: Dockerfile.tmpl
```

By default, the Dockerfile template is disabled and Porter automatically copies
all of the files in the current directory into the bundle's invocation image. When
you use a custom Dockerfile template, you must manually copy files into the bundle
using COPY statements in the Dockerfile template.

## .gitignore

This is a default file that we provide to help remind you which files are
generated by Porter, and shouldn't be committed to source control. You can
delete it if you don't need it.

## .dockerignore

This is a default file that controls which files are copied into the bundle's
invocation image by default. You can delete it if you don't need it.
